<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Help | ISweep</title>
  <link rel="stylesheet" href="styles/site-plan.css" />
  <script src="main.js" defer></script>

</head>

<body>
  <!-- Shared Header -->
  <header class="site-header">
    <div class="container header-inner">
      <a class="logo-box" href="index.html">
        <img src="images/ISweep.png" alt="ISweep logo" />
        <strong class="brand">ISweep</strong>
      </a>

      <nav class="main-nav">
        <a href="index.html">Home</a>
        <a href="Account.html">Account</a>
        <a href="Plans.html">Plans</a>
        <a href="Settings.html">Settings</a>
        <a href="Help.html" class="active">Help</a>
      </nav>

      <!-- Single Dark Mode button -->
      <button id="themeBtn" class="theme-toggle">
        Dark Mode
      </button>
    </div>
  </header>

  <main class="account-page container">
    <h1>Help &amp; Support</h1>
    <p class="subtitle">
      Need a hand? Find quick answers, contact support, or chat with us about ISweep.
    </p>

    <!-- CONTACT OPTIONS -->
    <section class="card">
      <h2>Contact Us</h2>

      <div class="help-contact-grid">
        <!-- Call & Email -->
        <div>
          <strong>Reach us directly</strong>
          <p>If you need help with setup, billing, or filters, we‚Äôre happy to help.</p>

          <p><strong>Phone:</strong> (800) 555-ISWP</p>
          <p><strong>Email:</strong> support@isweep.app</p>
          <p><strong>Hours:</strong> Monday‚ÄìSaturday, 9:00 AM ‚Äì 7:00 PM (MT)</p>
        </div>

        <!-- Quick links -->
        <div>
          <strong>Quick links</strong>
          <ul class="help-list">
            <li><a href="#faq">View common questions</a></li>
            <li><a href="#contact-form">Send us a support message</a></li>
            <li><a href="#troubleshooting">Troubleshooting tips</a></li>
          </ul>
        </div>
      </div>
    </section>

    <!-- FAQ SECTION -->
    <section class="card" id="faq">
      <h2>Frequently Asked Questions</h2>

      <!-- details/summary = built-in collapsible boxes -->
      <details class="faq-item" open>
        <summary>What does ISweep actually do?</summary>
        <p>
          ISweep listens to your audio and observes your video in real time.
          When it detects content you‚Äôve chosen to filter, it can mute,
          skip, or fast-forward automatically‚Äîwithout changing the original media.
        </p>
      </details>

      <details class="faq-item">
        <summary>Which devices does ISweep work with?</summary>
        <p>
          You can link ISweep to supported Smart TVs, streaming sticks,
          and companion devices. Check the Devices section in your Account
          page to see which devices you‚Äôve connected.
        </p>
      </details>

      <details class="faq-item">
        <summary>Will ISweep work with all streaming services?</summary>
        <p>
          ISweep is designed to work at the system level, so it can observe
          and filter content from most streaming apps, DVDs, and connected
          devices, as long as your device is supported.
        </p>
      </details>

      <details class="faq-item">
        <summary>Can I customize what is filtered for each child?</summary>
        <p>
          Yes. You can create different profiles with their own filter
          settings under <strong>Settings &gt; Parental Controls</strong>, so each
          child gets an experience that matches your family rules.
        </p>
      </details>
    </section>

    <!-- TROUBLESHOOTING TIPS -->
    <section class="card" id="troubleshooting">
      <h2>Troubleshooting</h2>
      <ul class="help-list">
        <li><strong>No sound?</strong> Check that your TV and streaming device audio
          are not both muted and that ISweep is not set to ‚ÄúMute Only‚Äù for all events.</li>
        <li><strong>Filters feel too strict?</strong> Lower the sensitivity slider or
          switch some categories to ‚ÄúLog only‚Äù in Settings.</li>
        <li><strong>ISweep not responding?</strong> Make sure your device is online and
          that ISweep is still linked under Devices.</li>
      </ul>
    </section>

    <!-- CONTACT FORM -->
    <section class="card" id="contact-form">
      <h2>Send us a message</h2>

      <form class="profile-form">
        <div class="item-row">
          <div class="help-form-fields">
            <!-- Name -->
            <label>
              <strong>Your Name</strong>
              <input
                class="profile-input"
                type="text"
                name="name"
                placeholder="Enter your name"
                required
              />
            </label>

            <!-- Email -->
            <label>
              <strong>Email</strong>
              <input
                class="profile-input"
                type="email"
                name="email"
                placeholder="you@example.com"
                required
              />
            </label>

            <!-- Topic -->
            <label>
              <strong>What do you need help with?</strong>
              <select name="topic" required>
                <option value="">Choose a topic</option>
                <option value="setup">Setup / installation</option>
                <option value="billing">Billing / plans</option>
                <option value="filters">Filters / settings</option>
                <option value="technical">Technical issue / bug</option>
                <option value="other">Something else</option>
              </select>
            </label>

            <!-- Message -->
            <label>
              <strong>Message</strong>
              <textarea
                name="message"
                rows="4"
                placeholder="Tell us what‚Äôs going on‚Ä¶"
                required
              ></textarea>
            </label>
          </div>

          <button type="submit">Send</button>
        </div>
      </form>
    </section>

      <!-- ISWEEP FILTER TEST DEMO -->
    <section class="card" id="isweep-test">
      <h2>Try ISweep Filter (Demo)</h2>
      <p>
        This demo shows how ISweep reacts when subtitles contain blocked words.
        Choose a plan on the Plans page first, then try a few lines here.
      </p>

      <label for="subtitleInput">
        <strong>Subtitle text</strong>
      </label>
      <input
        id="subtitleInput"
        type="text"
        class="profile-input"
        placeholder="Type a subtitle line, e.g. 'He said badword again'"
      />

      <button type="button" id="checkSubtitleBtn" style="margin-top: 0.75rem;">
        Test ISweep
      </button>

      <pre id="decisionOutput"
           style="margin-top: 1rem; padding:0.5rem; background:#111827; color:#e5e7eb; font-size:0.8rem; overflow:auto; border-radius: 6px;">
      </pre>
    </section>

    <!-- Demo video ISweep can control -->
    <section class="card">
      <h2>Demo Video</h2>
      <p>
        When ISweep decides to mute or skip, it will act on this demo video.
      </p>
      <video id="demoVideo" width="600" controls style="max-width:100%;">
        <!-- Replace with any MP4 you have; this is just a placeholder -->
        <source src="your-video-file.mp4" type="video/mp4" />
        Your browser does not support the video tag.
      </video>
    </section>

    <!-- Tiny broom icon overlay (hidden by default) -->
    <div id="broomIcon"
         style="
           position: fixed;
           top: 8px;
           right: 8px;
           padding: 6px 10px;
           background: rgba(0,0,0,0.7);
           color: white;
           font-size: 0.8rem;
           border-radius: 999px;
           display: none;
           z-index: 9999;
         ">
      üßπ ISweep active
    </div>

  </main>

  <footer>
    <p>&copy; 2025 ISweep Inc. All rights reserved.</p>
  </footer>

  <!-- Floating Chatbox -->
  <button class="chat-toggle" id="chatToggle">
    Chat
  </button>

  <div class="chat-widget" id="chatWidget">
    <div class="chat-header">
      <span>ISweep Support</span>
      <button class="chat-close" id="chatClose">&times;</button>
    </div>
    <div class="chat-body">
      <p class="chat-message bot">
        Hi! This is a demo chat. Type your question and imagine this going to support.
      </p>
      <div class="chat-log" id="chatLog"></div>
    </div>
    <form class="chat-input-row" id="chatForm">
      <input
        type="text"
        id="chatInput"
        placeholder="Type a message..."
        required
      />
      <button type="submit">Send</button>
    </form>
  </div>

  <!-- Scripts -->
  <script>
    // Theme toggle (same as other pages)
    const btn = document.getElementById('themeBtn');
    if (btn) {
      btn.addEventListener('click', () => {
        document.body.classList.toggle('dark-mode');
      });
    }

    // ===== CONTACT FORM HANDLER =====
    const contactForm = document.querySelector('#contact-form .profile-form');
    if (contactForm) {
      contactForm.addEventListener('submit', (e) => {
        e.preventDefault();
        
        const name = contactForm.elements['name'].value;
        const email = contactForm.elements['email'].value;
        const topic = contactForm.elements['topic'].value;
        const message = contactForm.elements['message'].value;
        
        // Show confirmation
        alert(`Thank you, ${name}! Your message about "${topic}" has been received. We'll respond to ${email} within 24 hours.`);
        
        // Reset form
        contactForm.reset();
      });
    }

    // ===== ISWEEP TEST DEMO =====
    const checkSubtitleBtn = document.getElementById('checkSubtitleBtn');
    const subtitleInput = document.getElementById('subtitleInput');
    const decisionOutput = document.getElementById('decisionOutput');

    // Profanity words to check (demo list)
    const blockedWords = ['badword', 'profanity', 'swear', 'curse', 'hell', 'damn', 'crap'];

    if (checkSubtitleBtn && subtitleInput && decisionOutput) {
      checkSubtitleBtn.addEventListener('click', () => {
        const text = subtitleInput.value.trim().toLowerCase();
        
        if (!text) {
          decisionOutput.textContent = '(Enter a subtitle line to test ISweep)';
          return;
        }

        // Check if filtering is enabled (developer mode: always enabled)
        const planKey = localStorage.getItem('isweep-plan') || 'free';
        const filteringEnabled = true; // Developer: always allow filtering
        // Production check: planKey === 'flexible' || planKey === 'full'

        if (!filteringEnabled) {
          decisionOutput.textContent = 'ISweep Filtering is DISABLED on your current plan.\nUpgrade to Flexible or Full plan to enable filtering.';
          return;
        }

        // Check for blocked words
        let foundWords = [];
        blockedWords.forEach(word => {
          if (text.includes(word)) {
            foundWords.push(word);
          }
        });

        if (foundWords.length > 0) {
          decisionOutput.textContent = `üßπ ISweep DETECTED: ${foundWords.join(', ')}\nAction: MUTE\nDuration: 5 seconds`;
          document.getElementById('broomIcon').style.display = 'block';
          setTimeout(() => {
            document.getElementById('broomIcon').style.display = 'none';
          }, 3000);
        } else {
          decisionOutput.textContent = '‚úì ISweep PASSED: No blocked content detected.\nAction: PLAY';
        }
      });

      // Allow Enter key to trigger test
      subtitleInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          checkSubtitleBtn.click();
        }
      });
    }

    // Simple chatbox open/close + fake messages
    const chatToggle = document.getElementById('chatToggle');
    const chatWidget = document.getElementById('chatWidget');
    const chatClose = document.getElementById('chatClose');
    const chatForm = document.getElementById('chatForm');
    const chatInput = document.getElementById('chatInput');
    const chatLog = document.getElementById('chatLog');

    chatToggle.addEventListener('click', () => {
      chatWidget.classList.toggle('open');
    });

    chatClose.addEventListener('click', () => {
      chatWidget.classList.remove('open');
    });

    // Fake chat: just echoes the user message into the window
    chatForm.addEventListener('submit', (event) => {
      event.preventDefault();
      const text = chatInput.value.trim();
      if (!text) return;

      const msg = document.createElement('p');
      msg.className = 'chat-message user';
      msg.textContent = text;
      chatLog.appendChild(msg);

      // Clear input
      chatInput.value = '';

      // Fake bot reply
      const reply = document.createElement('p');
      reply.className = 'chat-message bot';
      reply.textContent = "Thanks for your message! In a real app, this would send to support.";
      chatLog.appendChild(reply);

      // Scroll to bottom
      chatLog.scrollTop = chatLog.scrollHeight;
    });
  </script>
</body>
</html>
